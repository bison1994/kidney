<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="keyword" content="Direction-Aware Hover Effect ">
	<script src="jquery.min.js"></script>
	<title>鼠标追踪式hover效果</title>
</head>
<style>
*{
	margin:0;
	padding:0;
}
body{
	padding:10px 100px;
}
div.wrapper{
	width:300px;
	height:300px;
	margin:10px;
	overflow: hidden;
	position: relative;
	display: inline-block;
}
img{
	position: absolute;
	top:0;
	left:0;
}
div.hoverbox{
	width:300px;
	height:300px;
	position: absolute;
	left:0;
	top:300px;
	z-index: 1;
	background-color: rgba(0,0,0,.3);
}
.hoverbox:hover{
	background-color: rgba(0,0,0,.3);
	width:100%;
	height:100%;
	z-index: 9;
}

</style>
<body>
	<div class="wrapper">		
		<div class="hoverbox"></div>
		<img src="1.jpg" height="300px">
	</div>
	<div class="wrapper">		
		<div class="hoverbox"></div>
		<img src="1.jpg" height="300px">
	</div>
	<div class="wrapper">		
		<div class="hoverbox"></div>
		<img src="1.jpg" height="300px">
	</div>
	<div class="wrapper">		
		<div class="hoverbox"></div>
		<img src="1.jpg" height="300px">
	</div>
	<div class="wrapper">		
		<div class="hoverbox"></div>
		<img src="1.jpg" height="300px">
	</div>
	<div class="wrapper">		
		<div class="hoverbox"></div>
		<img src="1.jpg" height="300px">
	</div>
	<div class="wrapper">		
		<div class="hoverbox"></div>
		<img src="1.jpg" height="300px">
	</div>
	<div class="wrapper">		
		<div class="hoverbox"></div>
		<img src="1.jpg" height="300px">
	</div>
</body>
<script>

	var boxWidth = $(this).width();

	$(".wrapper").mouseenter(function (event) {
		
        var self = $(this);
        var hoverbox = self.find(".hoverbox");

        var pos = self.offset();
            w = self.width(),
            h = self.height(),
            x = (event.pageX - pos.left - (w / 2)),
            y = (event.pageY - pos.top - (h / 2)),
            d = Math.round( Math.atan2(y, x) / 1.57079633 + 5 ) % 4;
            
        switch(d){
            case 0: // 上侧进
                hoverbox.css({"top":-boxWidth,"left":0});
                hoverbox.stop().animate({"top":0},300);
            break;
            case 1: // 右侧进
                hoverbox.css({"top":0,"left":boxWidth});
                hoverbox.stop().animate({"left":0},300);
            break;
            case 2: // 下侧进
                hoverbox.css({"top":boxWidth,"left":0});
                hoverbox.stop().animate({"top":0},300);
            break;
            case 3: // 左侧进
                hoverbox.css({"top":0,"left":-boxWidth});
                hoverbox.stop().animate({"left":0},300);
            break;
        };
	});


	// $(".wrapper").mouseenter(function(event){
	// 	var self = $(this);
	// 	var hoverbox = self.find(".hoverbox");
	// 	var x = event.offsetX;
	// 	var y = event.offsetY;
	// 	if(x < y){
	// 		if(x + y <= 300){
	// 			// 左侧进
	// 			hoverbox.css({"top":0,"left":-300});
	// 			hoverbox.stop().animate({"left":0},300);
	// 		}else{
	// 			// 下侧进
	// 			hoverbox.css({"top":300,"left":0});
	// 			hoverbox.stop().animate({"top":0},300);
	// 		}
	// 	}
	// 	if(x > y){
	// 		if(x + y <= 300){
	// 			// 上侧进
	// 			hoverbox.css({"top":-300,"left":0});
	// 			hoverbox.stop().animate({"top":0},300);
	// 		}else{
	// 			// 右侧进
	// 			hoverbox.css({"top":0,"left":300});
	// 			hoverbox.stop().animate({"left":0},300);
	// 		}
	// 	}
	// })

	$(".wrapper").mouseleave(function (event) {
        var self = $(this);
        var hoverbox = self.find(".hoverbox");

        var pos = self.offset();
            w = self.width(),
            h = self.height(),
            x = (event.pageX - pos.left - (w / 2)),
            y = (event.pageY - pos.top - (h / 2)),
            d = Math.round( Math.atan2(y, x) / 1.57079633 + 5 ) % 4;
            
        switch(d){
            case 0: // 上侧出
                hoverbox.animate({"top":-boxWidth},300);
            break;
            case 1: // 右侧出
                hoverbox.animate({"left":boxWidth},300);
            break;
            case 2: // 下侧出
                hoverbox.animate({"top":boxWidth},300);
            break;
            case 3: // 左侧出
                hoverbox.animate({"left":-boxWidth},300);
            break;
        };
    });
	// $(".wrapper").mouseleave(function(event){
	// 	var self = $(this);
	// 	var hoverbox = self.find(".hoverbox");
	// 	var x = event.offsetX;
	// 	var y = event.offsetY;
	// 	if(x < y){
	// 		if(x + y <= 300){
	// 			// 左侧出
	// 			hoverbox.animate({"left":-300},300);
	// 		}else{
	// 			// 下侧出
	// 			hoverbox.animate({"top":300},300);
	// 		}
	// 	}
	// 	if(x > y){
	// 		if(x + y <= 300){
	// 			// 上侧出
	// 			hoverbox.animate({"top":-300},300);
	// 		}else{
	// 			// 右侧出
	// 			hoverbox.animate({"left":300},300);
	// 		}
	// 	}
	// })
</script>
</html>